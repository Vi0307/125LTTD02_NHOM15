<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTOTECH - Thông báo</title>
    <link rel="stylesheet" href="asset/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<div class="page-wrapper">

    <!-- Top User -->
    <div class="top-user">
        <span class="username">Administrator</span>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar">
        <ul class="menu">
            <li class="menu-item" onclick="goTo('dashboard.html')">
                <i class="fas fa-th-large"></i> Sản phẩm
            </li>
            <li class="menu-item" onclick="goTo('user.html')">
                <i class="fas fa-users"></i> Người dùng
            </li>
            <li class="menu-item" onclick="goTo('order.html')">
                <i class="fas fa-shopping-cart"></i> Đơn hàng
            </li>
            <li class="menu-item" onclick="goTo('schedule.html')">
                <i class="fas fa-calendar-check"></i> Đặt lịch
            </li>
            <li class="menu-item active" onclick="goTo('notifications.html')">
                <i class="fas fa-bell"></i> Thông báo
            </li>
        </ul>
    </aside>

    <main class="main-content">

        <!-- BẢNG THÔNG BÁO BẢO DƯỠNG SẮP TỚI -->
        <div class="table-card">
            <h2 class="table-title">Danh sách khách hàng cần nhắc bảo dưỡng</h2>
            <div class="table-container">
                <table class="notify-table">
                    <thead>
                        <tr>
                            <th>Khách hàng</th>
                            <th>Tên xe</th>
                            <th>Đã thực hiện</th>
                            <th>Lần tiếp theo</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody id="notifyTableBody">
                        <tr>
                            <td>Việt Hoàng</td>
                            <td>BMW i5</td>
                            <td>3</td>
                            <td>12/10/2025</td>
                            <td class="action-icons">
                                <i class="fas fa-bell bell-notify" title="Gửi thông báo nhắc nhở" onclick="sendReminder(this)"></i>
                                <i class="fas fa-trash delete-notify" title="Xóa khỏi danh sách" onclick="deleteReminder(this)"></i>
                            </td>
                        </tr>
                        <tr>
                            <td>Lê Thị Mai</td>
                            <td>BMW i8</td>
                            <td>6</td>
                            <td>01/12/2025</td>
                            <td class="action-icons">
                                <i class="fas fa-bell bell-notify" title="Gửi thông báo nhắc nhở" onclick="sendReminder(this)"></i>
                                <i class="fas fa-trash delete-notify" title="Xóa khỏi danh sách" onclick="deleteReminder(this)"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>

    <div class="bottom-brand">
        <div class="brand-name">OTOTECH</div>
        <div class="version">Version: 1.0.0.11</div>
    </div>
</div>

<script>
// Gửi thông báo nhắc nhở
function sendReminder(icon) {
    event.stopPropagation();
    const tenKH = icon.closest('tr').cells[0].textContent.trim();
    
    if (confirm(`Gửi thông báo nhắc bảo dưỡng cho khách hàng "${tenKH}"?`)) {
        icon.style.color = '#28a745';
        icon.classList.replace('fa-bell', 'fa-bell-slash');
        icon.title = "Đã gửi thông báo";
        alert(`Đã gửi thành công thông báo đến ${tenKH}!`);
    }
}

// Xóa khỏi danh sách nhắc nhở
function deleteReminder(icon) {
    event.stopPropagation();
    const tenKH = icon.closest('tr').cells[0].textContent.trim();
    
    if (confirm(`Xóa khách hàng "${tenKH}" khỏi danh sách nhắc bảo dưỡng?`)) {
        icon.closest('tr').remove();
        alert(`Đã xóa ${tenKH} khỏi danh sách!`);
    }
}

function goTo(page) {
            window.location.href = page;
        }
</script>

</body>
</html>